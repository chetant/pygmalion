name:                pygmalion
version:             0.1.0.0
synopsis:            A code analysis tool based on libclang
homepage:            http://github.com/sfowler/pygmalion
license:             BSD3
license-file:        LICENSE
author:              Seth Fowler <mark.seth.fowler@gmail.com>
maintainer:          Seth Fowler <mark.seth.fowler@gmail.com>
copyright:           Copyright (C) 2013 Seth Fowler
category:            Development
build-type:          Simple
cabal-version:       >=1.8

library
  ghc-options:     -Wall -Werror -threaded
  build-depends:   base >= 4,
                   async,
                   bytestring,
                   configurator,
                   cereal,
                   cereal-conduit,
                   conduit,
                   deepseq,
                   directory,
                   filepath,
                   ghc-prim,
                   json,
                   mtl,
                   network,
                   network-conduit,
                   sqlite-simple,
                   text,
                   time,
                   transformers,
                   LibClang
  exposed-modules: Pygmalion.Analyze,
                   Pygmalion.Analyze.Command,
                   Pygmalion.Analyze.Source,
                   Pygmalion.Config,
                   Pygmalion.Core,
                   Pygmalion.Database,
                   Pygmalion.JSON,
                   Pygmalion.RPC.Client,
                   Pygmalion.RPC.Server
  other-modules:   Control.Exception.Labeled,
                   Data.Bool.Predicate
  hs-source-dirs:  src

executable pygmalion
  ghc-options:    -Wall -Werror -threaded -rtsopts -with-rtsopts=-N
  main-is:        Pygmalion.hs 
  build-depends:  base >= 4,
                  pygmalion
  hs-source-dirs: tools

executable pygmake
  ghc-options:    -Wall -Werror -threaded -rtsopts -with-rtsopts=-N
  main-is:        Pygmake.hs 
  build-depends:  base >= 4,
                  async,
                  process,
                  pygmalion
  hs-source-dirs: tools

executable pygscan
  ghc-options:    -Wall -Werror -threaded -rtsopts -with-rtsopts=-N
  main-is:        Pygscan.hs 
  build-depends:  base >= 4,
                  async,
                  mtl,
                  process,
                  pygmalion
  hs-source-dirs: tools

test-suite pygmalion-quickcheck
  ghc-options:    -threaded -rtsopts -with-rtsopts=-N
  type:           exitcode-stdio-1.0
  main-is:        QuickCheck.hs
  build-depends:  base >= 4,
                  pygmalion,
                  QuickCheck,
                  test-framework,
                  test-framework-quickcheck2
  other-modules:  Data.Bool.Predicate
  hs-source-dirs: src,
                  tests

test-suite pygmalion-functional
  ghc-options:    -threaded -rtsopts -with-rtsopts=-N
  type:           exitcode-stdio-1.0
  main-is:        Functional.hs
  build-depends:  base >= 4,
                  directory,
                  process,
                  pygmalion,
                  test-framework,
                  test-framework-golden
  hs-source-dirs: tests
